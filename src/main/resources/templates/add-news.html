<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8"/>
    <title th:text="${newsItem.id}==null?'Create News':'Edit News'">Form</title>
    <style>

        @font-face {
            font-family: 'ArsenicaTrialMedium';
            src: url('/fonts/ArsenicaTrial-Medium.ttf') format('truetype');
            font-weight: 500; font-style: normal;
        }
        * { margin:0; padding:0; box-sizing:border-box; }
        body {
            font-family: 'Orbitron', sans-serif;
            background: url('/images/xyvox-background-mainpage.png') no-repeat center/cover;
            color: #E0DFFF; min-height:100vh;
            display:flex; flex-direction:column;
        }
        a { text-decoration:none; color:inherit; }
        button { cursor:pointer; }

        .navbar {
            display:flex; justify-content:space-between; align-items:center;
            padding:20px 60px; background:rgba(0,0,0,0.7); backdrop-filter:blur(4px);
        }
        .navbar-left { display:flex; align-items:center; }
        .navbar-left img.logo { width:40px; filter:drop-shadow(0 0 8px #BB00FF); margin-right:12px; }
        .navbar-left .logo-text {
            font-family:'ArsenicaTrialMedium',sans-serif;
            font-size:1.8rem; color:#BB00FF;
            text-shadow:0 0 8px rgba(255,255,255,0.8), 0 0 16px rgba(187,0,255,0.6);
            margin-right:40px;
        }
        .nav-links a { margin-right:32px; position:relative; transition:color .2s; }
        .nav-links a::after {
            content:''; position:absolute; bottom:-4px; left:0; width:0; height:3px;
            background:#BB00FF; transition:width .2s;
        }
        .nav-links a:hover { color:#FFF; }
        .nav-links a:hover::after { width:100%; }
        .nav-links .active { color:#FFF; }

        .navbar-right .btn {
            margin-left:24px; padding:8px 20px; border:2px solid #BB00FF;
            border-radius:24px; background:none; color:#E0DFFF; text-transform:uppercase;
            transition:all .2s; }
        .navbar-right .btn:hover {
            background:rgba(187,0,255,0.3); border-color:#FFF; color:#FFF;
            box-shadow:0 0 12px rgba(255,255,255,0.7); transform:scale(1.05);
        }


        .form-container {
            padding:20px 60px; flex:1; display:flex;
            justify-content:center; align-items:flex-start;
        }
        .news-form {
            background:rgba(46,0,70,0.8); backdrop-filter:blur(6px);
            padding:40px; border-radius:16px; width:600px;
            box-shadow:0 0 20px rgba(187,0,255,0.6);
            display:flex; flex-direction:column; gap:24px;
        }
        .news-form label {
            color:#D8CFFF; font-size:.9rem; margin-bottom:4px;
        }
        .news-form input[type="text"],
        .news-form input[type="url"],
        .news-form textarea {
            padding:12px 16px; border-radius:30px; border:none;
            background:#2a003f; color:#FFF; font-size:1rem;
            box-shadow:0 0 10px rgba(199,109,255,0.3);
            transition:box-shadow .3s; width:100%;
        }
        .news-form input:focus,
        .news-form textarea:focus {
            outline:none; box-shadow:0 0 20px rgba(199,109,255,0.6);
        }
        .form-actions {
            display:flex; justify-content:flex-end; gap:12px;
        }
        .form-actions .action-btn {
            padding:12px 28px; font-size:1rem; border-radius:30px;
            color:#000; text-transform:uppercase; transition:all .2s;
        }
        .form-actions .edit-btn {
            margin-left: 24px;
            padding: 12px 28px;
            font-size: 1rem;
            border-radius: 30px;
            background: rgba(187, 0, 255, 0.3);
            border-color: #7300ff;
            color: rgba(174, 107, 255, 0.6);
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.2s ease-in-out;
            animation: pulse 3.5s infinite
        }
        .form-actions .delete-btn {
            margin-left: 24px;
            padding: 12px 28px;
            font-size: 1rem;

            border-radius: 30px;
            background: rgba(187, 0, 255, 0.3);
            border-color: #7a00ff;
            color: #7a00ff;
            cursor: pointer;
            text-transform: uppercase;
            transition: all 0.2s ease-in-out;
            animation: pulse 3.5s infinite
        }
        .form-actions .action-btn:hover {
            transform:scale(1.05);
            box-shadow:0 0 24px rgba(255,255,255,0.7);
        }

        .hidden { display:none!important; }
    </style>

</head>

<div class="navbar">
    <div class="navbar-left">
        <img class="logo" th:src="@{/images/logo.png}" alt="Logo"/>
        <span class="logo-text">XYVOX</span>
        <div class="nav-links">
            <a th:href="@{/xyvox/api/v1/trade}">Trade</a>
            <a th:href="@{/xyvox/api/v1/news}" class="active">News</a>
            <a th:href="@{/xyvox/api/v1/posts}">Posts</a>
            <a sec:authorize="isAuthenticated()" th:href="@{/xyvox/api/v1/users/my-profile}">Profile</a>
        </div>
    </div>
    <div class="navbar-right">
        <a sec:authorize="!isAuthenticated()" th:href="@{/login}" class="btn login">Log In</a>
        <a sec:authorize="!isAuthenticated()" th:href="@{/signup}" class="btn signup">Sign Up</a>
        <form sec:authorize="isAuthenticated()" th:action="@{/logout}" method="post" style="display:inline;">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
            <button type="submit" class="btn logout">Log Out</button>
        </form>
    </div>
</div>

<div class="form-container">
    <form th:action="@{/xyvox/api/v1/news/add-news/save}"
          th:object="${newsItem}"
          method="post"
          class="news-form">
        <input type="hidden" th:field="*{id}"/>

        <label for="title">Title</label>
        <input type="text" id="title" th:field="*{title}" maxlength="512" required/>

        <label for="link">Link (URL)</label>
        <input type="url" id="link" th:field="*{link}" maxlength="1024" required/>

        <label for="source">Source</label>
        <input type="text" id="source" th:field="*{source}" maxlength="128" required/>

        <label for="summary">Summary</label>
        <textarea id="summary" th:field="*{summary}" rows="5" required></textarea>

        <div class="form-actions">
            <a th:href="@{/xyvox/api/v1/news}" class="action-btn delete-btn">Cancel</a>
            <button type="submit" class="action-btn edit-btn">Save</button>
        </div>
    </form>
</div>
</body>
</html>
